<div class="container bottom">
  <div class="row push-down">
    <div class="col-sm-5 push-down-lite well">
      <h3 class="teal center"> Search for Beer:</h3><br>
        <%= form_tag(beers_path, :method => "get", id: "search-form") do %>
        <div class="form-group">
          <%= label_tag "Choose a Style" %>:
          <%= select_tag :style_id, options_from_collection_for_select(Style.all, :id, :name, params[:style_id]), prompt: 'All', class: "form-control" %>
        </div>
        <div class="form-group push-down-lite">
          <%= label_tag "Choose a Style" %>:
          <%= select_tag :style_id, options_from_collection_for_select(Style.all, :id, :name, params[:style_id]), prompt: 'All', class: "form-control" %>
        </div>
        <div class="form-group push-down-lite">
          <%= submit_tag "Go", class: "btn btn-sm button-tan" %>
        </div>
    </div>

    <div class="col-sm-6 col-sm-offset-1">
      <h3 class="blue center">Swappers near you!</h3>
      <div id="map"></div>

      <script type="text/javascript">
        handler = Gmaps.build('Google');
        handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
          markers = handler.addMarkers(<%= raw @hash.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
          handler.getMap().setZoom(10);
        });
      </script>
    </div>
  </div>

      <% if @styled_beers.present? %>
        <h3 class="blue indent">Search Results:</h3>
          <ul class="no-indent push-down-lite">
            <% @styled_beers.each do |beer| %>
              <div class="col-sm-6">
                <%= render :partial => '/beers/beer', locals: {:@beer => beer, :@user => current_user }%>
              </div>
            <% end %>
          </ul>
      <% else %>
        <% if params[:style_id] %>
        <br><p>Sorry, nobody's sharing any beers of that style right now.</p>
        <% end %>
      <% end %>

      <div class="row">
        <h3 class="indent blue">Recent postings:</h3>
        <ul class="no-indent push-down-lite">
          <% @recent_beers.each do |beer| %>
            <div class="col-sm-6">
            <%= render :partial => '/beers/beer', locals: {:@beer => beer, :@user => current_user }%>
            </div>
          <% end %>
        </ul>
        <% end %>
      </div>
    </div>
  </div>
</div>
